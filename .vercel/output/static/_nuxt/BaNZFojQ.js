import{m as _,u as z,a as F,b as G,c as V,d as D,e as E,f as S,r as b,g as i,h as H,t as k,i as J,j as K,k as Q,o as W,w as B,l as M,n as P,p as x,q as X,s as I,v as l,x as Y,y as C,z as Z,A as ee,B as te,_ as se}from"./CMQlzLm0.js";import{_ as re}from"./CnFEyKzK.js";const ae={slots:{modal:"",input:"[&>input]:text-base/5"},variants:{fullscreen:{false:{modal:"sm:max-w-3xl h-full sm:h-[28rem]"}}}},ne={__name:"UContentSearch",props:_({icon:{type:null,required:!1},placeholder:{type:String,required:!1},autofocus:{type:Boolean,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1},close:{type:[Boolean,Object],required:!1,default:!0},closeIcon:{type:null,required:!1},shortcut:{type:String,required:!1,default:"meta_k"},links:{type:Array,required:!1},navigation:{type:Array,required:!1},groups:{type:Array,required:!1},files:{type:Array,required:!1},fuse:{type:Object,required:!1},colorMode:{type:Boolean,required:!1,default:!0},class:{type:null,required:!1},ui:{type:void 0,required:!1},title:{type:String,required:!1},description:{type:String,required:!1},overlay:{type:Boolean,required:!1},transition:{type:Boolean,required:!1},content:{type:Object,required:!1},dismissible:{type:Boolean,required:!1},fullscreen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0}},{searchTerm:{type:String,default:""},searchTermModifiers:{}}),emits:["update:searchTerm"],setup(u,{expose:T}){const t=u,A=z(),d=F(u,"searchTerm",{type:String,default:""}),{t:r}=G(),{open:a,mapNavigationItems:f,postFilter:m}=V(),o=D(),n=E(),R=S(b(t,"icon","placeholder","autofocus","loading","loadingIcon","close","closeIcon")),U=S(b(t,"overlay","transition","content","dismissible","fullscreen","modal","portal")),j=()=>C(A,["content"]),w=i(()=>H({},t.fuse,{fuseOptions:{includeMatches:!0}})),h=i(()=>k({extend:k(ae),...n.ui?.contentSearch||{}})({fullscreen:t.fullscreen})),y=J("commandPaletteRef"),g=i(()=>t.links?.length?t.links.flatMap(e=>[{...e,suffix:e.description,description:void 0,icon:e.icon||n.ui.icons.file,children:void 0},...e.children?.map(s=>({...s,prefix:e.label+" >",suffix:s.description,description:void 0,icon:s.icon||e.icon||n.ui.icons.file}))||[]]):[]),O=i(()=>t.navigation?.length?t.navigation.some(e=>!!e.children?.length)?t.navigation.map(e=>({id:e.path,label:e.title,items:f(e.children||[],t.files||[]),postFilter:m})):[{id:"docs",items:f(t.navigation,t.files||[]),postFilter:m}]:[]),v=i(()=>!t.colorMode||o?.forced?null:{id:"theme",label:r("contentSearch.theme"),items:[{label:r("colorMode.system"),icon:n.ui.icons.system,active:o.preference==="system",onSelect:()=>{o.preference="system"}},{label:r("colorMode.light"),icon:n.ui.icons.light,active:o.preference==="light",onSelect:()=>{o.preference="light"}},{label:r("colorMode.dark"),icon:n.ui.icons.dark,active:o.preference==="dark",onSelect:()=>{o.preference="dark"}}]}),$=i(()=>{const e=[];return g.value.length&&e.push({id:"links",label:r("contentSearch.links"),items:g.value}),e.push(...O.value),e.push(...t.groups||[]),v.value&&e.push(v.value),e});function L(e){e.disabled||(a.value=!1,d.value="")}return K({[t.shortcut]:{usingInput:!0,handler:()=>a.value=!a.value}}),T({commandPaletteRef:y}),(e,s)=>(W(),Q(se,I({open:l(a),"onUpdate:open":s[2]||(s[2]=p=>te(a)?a.value=p:null),title:u.title||l(r)("contentSearch.title"),description:u.description||l(r)("contentSearch.description")},l(U),{"data-slot":"modal",class:h.value.modal({class:[t.ui?.modal,t.class]})}),{content:B(p=>[M(e.$slots,"content",P(x(p)),()=>[X(re,I({ref_key:"commandPaletteRef",ref:y,"search-term":d.value,"onUpdate:searchTerm":s[0]||(s[0]=c=>d.value=c)},l(R),{groups:$.value,fuse:w.value,ui:l(Y)(l(C)(h.value,["modal"]),t.ui),"onUpdate:modelValue":L,"onUpdate:open":s[1]||(s[1]=c=>a.value=c)}),Z({_:2},[ee(j(),(c,q)=>({name:q,fn:B(N=>[M(e.$slots,q,P(x(N)))])}))]),1040,["search-term","groups","fuse","ui"])])]),_:3},16,["open","title","description","class"]))}};export{ne as default};
